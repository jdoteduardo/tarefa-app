<?xml version="1.0" encoding="utf-8" ?>
<log4net>
    <appender name="TraceAppender" type="log4net.Appender.TraceAppender">
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%5level - %message%newline" />
        </layout>
    </appender>

    <!-- Appender para logs de erro -->
    <appender name="ErrorFile" type="log4net.Appender.RollingFileAppender">
        <file value="logs/error/app-error.log" />
        <appendToFile value="true" />
        <rollingStyle value="Size" />
        <maximumFileSize value="5MB" />
        <maxSizeRollBackups value="5" />
        
        <filter type="log4net.Filter.LevelMatchFilter">
            <levelToMatch value="ERROR" />
        </filter>
        <filter type="log4net.Filter.DenyAllFilter" />

        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date [%level] %thread %logger - %message%newline%exception%newline" />
        </layout>
    </appender>

    <!-- Appender para logs não-erro -->
    <appender name="NonErrorFile" type="log4net.Appender.RollingFileAppender">
        <file value="logs/info/app-info.log" />
        <appendToFile value="true" />
        <rollingStyle value="Composite" />
        <maximumFileSize value="5MB" />
        <maxSizeRollBackups value="2" />

        <filter type="log4net.Filter.LevelRangeFilter">
            <levelMin value="DEBUG" />
            <levelMax value="WARN" />
        </filter>

        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date [%level] %thread %logger - %message%newline" />
        </layout>
    </appender>

    <!-- Appender para logs SQL -->
    <appender name="SqlLogFile" type="log4net.Appender.RollingFileAppender">
        <file value="logs/sql/sql-queries.log" />
        <appendToFile value="true" />
        <rollingStyle value="Date" />
        <datePattern value="yyyy-MM-dd" />
        <preserveLogFileNameExtension value="true" />
        <staticLogFileName value="false" />
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date [%thread] %-5level%newline%message%newline%newline" />
        </layout>
    </appender>

    <!-- Logger específico para Entity Framework -->
    <logger name="Microsoft.EntityFrameworkCore">
        <level value="INFO" />
        <appender-ref ref="SqlLogFile" />
    </logger>

    <root>
        <level value="INFO" />
        <appender-ref ref="TraceAppender" />
        <appender-ref ref="ErrorFile" />
        <appender-ref ref="NonErrorFile" />
    </root>
</log4net>